# QR Code æŽˆæ¬ŠåŠŸèƒ½èªªæ˜Ž

## ðŸŽ¯ ç‚ºä»€éº¼éœ€è¦ QR Code æŽˆæ¬Šï¼Ÿ

### è§¸æŽ§èž¢å¹•çš„å›°æ“¾
åœ¨è»Šæ©Ÿçš„è§¸æŽ§èž¢å¹•ä¸Šè¼¸å…¥ Spotify å¸³è™Ÿå¯†ç¢¼éžå¸¸ä¸ä¾¿ï¼š
- âŒ è§¸æŽ§éµç›¤é›£ä»¥ç²¾æº–é»žæ“Š
- âŒ 1920x480 æ©«å‘èž¢å¹•ä¸é©åˆè¼¸å…¥
- âŒ ç‰¹æ®Šç¬¦è™Ÿå’Œå¤§å°å¯«åˆ‡æ›éº»ç…©
- âŒ åœ¨è»Šå…§ç’°å¢ƒè¼¸å…¥å¯†ç¢¼ä¸å¤ å®‰å…¨

### QR Code è§£æ±ºæ–¹æ¡ˆ
ä½¿ç”¨æ‰‹æ©ŸæŽƒæ QR Code å®ŒæˆæŽˆæ¬Šï¼š
- âœ… ç„¡éœ€åœ¨è»Šæ©Ÿè¼¸å…¥ä»»ä½•å…§å®¹
- âœ… æ‰‹æ©Ÿä¸Šæ“ä½œæ›´å®‰å…¨æ–¹ä¾¿
- âœ… é©åˆä»»ä½•å°ºå¯¸çš„è§¸æŽ§èž¢å¹•
- âœ… å®Œæ•´çš„ OAuth 2.0 å®‰å…¨æµç¨‹

## ðŸ–¼ï¸ ä»‹é¢é è¦½

### æŽˆæ¬Šç•«é¢ï¼ˆ1920x480ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ðŸŽµ Spotify æŽˆæ¬Š                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  ä½¿ç”¨æ‰‹æ©ŸæŽƒæ QR Code å®ŒæˆæŽˆæ¬Š           â”‚          â”‚        â”‚
â”‚                                        â”‚  QR Code â”‚        â”‚
â”‚  æ­¥é©Ÿï¼š                                 â”‚          â”‚        â”‚
â”‚  1ï¸âƒ£ ä½¿ç”¨æ‰‹æ©Ÿç›¸æ©Ÿæˆ– QR æŽƒæ App           â”‚          â”‚        â”‚
â”‚  2ï¸âƒ£ æŽƒæå³å´çš„ QR Code                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  3ï¸âƒ£ åœ¨æ‰‹æ©Ÿä¸Šç™»å…¥ Spotify ä¸¦æŽˆæ¬Š         æŽƒææ­¤ QR Code     â”‚
â”‚  4ï¸âƒ£ æŽˆæ¬Šå®Œæˆå¾Œè‡ªå‹•è¿”å›žè»Šæ©Ÿ                                â”‚
â”‚                                                           â”‚
â”‚  ç­‰å¾…æŽƒæ...                             [å–æ¶ˆ]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ‰‹æ©ŸæŽˆæ¬Šé é¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Spotify Logo   â”‚
â”‚                 â”‚
â”‚ QT Dashboard    â”‚
â”‚ è«‹æ±‚å­˜å–æ‚¨çš„     â”‚
â”‚ Spotify å¸³æˆ¶    â”‚
â”‚                 â”‚
â”‚ æ¬Šé™ï¼š           â”‚
â”‚ â€¢ è®€å–æ’­æ”¾ç‹€æ…‹   â”‚
â”‚ â€¢ è®€å–ç•¶å‰æ­Œæ›²   â”‚
â”‚                 â”‚
â”‚   [åŒæ„] [æ‹’çµ•]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŽˆæ¬ŠæˆåŠŸ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       âœ“        â”‚
â”‚   æŽˆæ¬ŠæˆåŠŸï¼     â”‚
â”‚  æ‚¨å¯ä»¥é—œé–‰æ­¤é é¢ â”‚
â”‚  å›žåˆ°è»Šæ©Ÿç¹¼çºŒæ“ä½œ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ”§ æŠ€è¡“å¯¦ä½œ

### 1. æŽˆæ¬Šæµç¨‹

```
è»Šæ©Ÿ                    æ‰‹æ©Ÿ                  Spotify
 â”‚                      â”‚                      â”‚
 â”œâ”€ ç”ŸæˆæŽˆæ¬Š URL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚                      â”‚                      â”‚
 â”œâ”€ ç”¢ç”Ÿ QR Code â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
 â”‚  (åŒ…å«æŽˆæ¬Š URL)        â”‚                      â”‚
 â”‚                      â”‚                      â”‚
 â”‚                      â”œâ”€ æŽƒæ QR Code         â”‚
 â”‚                      â”‚                      â”‚
 â”‚                      â”œâ”€ é–‹å•ŸæŽˆæ¬Šé é¢ â”€â”€â”€â”€â”€â”€>â”‚
 â”‚                      â”‚                      â”‚
 â”‚                      â”‚<â”€ é¡¯ç¤ºæŽˆæ¬Šè«‹æ±‚ â”€â”€â”€â”€â”€â”€â”¤
 â”‚                      â”‚                      â”‚
 â”‚                      â”œâ”€ ä½¿ç”¨è€…åŒæ„ â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚                      â”‚                      â”‚
 â”‚<â”€ å›žèª¿ (å«æŽˆæ¬Šç¢¼) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚                      â”‚                      â”‚
 â”œâ”€ äº¤æ› access token â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚                      â”‚                      â”‚
 â”‚<â”€ è¿”å›ž access token â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚                      â”‚                      â”‚
 â”œâ”€ é¡¯ç¤ºæŽˆæ¬ŠæˆåŠŸ â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
 â”‚                      â”‚                      â”‚
```

### 2. æ ¸å¿ƒç¨‹å¼ç¢¼

#### ç”Ÿæˆ QR Code
```python
import qrcode

# å–å¾—æŽˆæ¬Š URL
auth_url = spotify_oauth.get_authorize_url()

# ç”Ÿæˆ QR Code
qr = qrcode.QRCode(
    version=1,
    error_correction=qrcode.constants.ERROR_CORRECT_L,
    box_size=8,
    border=2,
)
qr.add_data(auth_url)
qr.make(fit=True)

# è½‰æ›ç‚ºåœ–ç‰‡
img = qr.make_image(fill_color="black", back_color="white")
```

#### HTTP å›žèª¿ä¼ºæœå™¨
```python
from http.server import HTTPServer, BaseHTTPRequestHandler

class AuthCallbackHandler(BaseHTTPRequestHandler):
    auth_code = None
    
    def do_GET(self):
        # è§£æžæŽˆæ¬Šç¢¼
        query = urlparse(self.path).query
        params = parse_qs(query)
        
        if 'code' in params:
            AuthCallbackHandler.auth_code = params['code'][0]
            # å›žå‚³æˆåŠŸé é¢çµ¦æ‰‹æ©Ÿ
            self.send_success_page()

# å•Ÿå‹•ä¼ºæœå™¨
server = HTTPServer(('localhost', 8888), AuthCallbackHandler)
server.serve_forever()
```

#### PyQt6 UI
```python
from PyQt6.QtWidgets import QWidget, QLabel, QVBoxLayout
from PyQt6.QtGui import QPixmap

class SpotifyQRAuthDialog(QWidget):
    def __init__(self):
        super().__init__()
        self.setFixedSize(1920, 480)
        
        # é¡¯ç¤º QR Code
        self.qr_label = QLabel()
        self.qr_label.setPixmap(qr_pixmap)
        
        # ç›£è½æŽˆæ¬Šç‹€æ…‹
        self.check_timer = QTimer()
        self.check_timer.timeout.connect(self.check_auth_status)
        self.check_timer.start(500)
```

### 3. å®‰å…¨æ€§è€ƒé‡

#### OAuth 2.0 æ¨™æº–æµç¨‹
- âœ… ä½¿ç”¨ Authorization Code Flowï¼ˆæœ€å®‰å…¨ï¼‰
- âœ… Client Secret å„²å­˜åœ¨æœ¬åœ°ï¼ˆä¸å‚³è¼¸ï¼‰
- âœ… æŽˆæ¬Šç¢¼åªä½¿ç”¨ä¸€æ¬¡
- âœ… Access Token æœ‰æ™‚é™ï¼ˆ1 å°æ™‚ï¼‰

#### QR Code å®‰å…¨
- âœ… QR Code åŒ…å« state åƒæ•¸é˜²æ­¢ CSRF
- âœ… æŽˆæ¬Š URL åƒ…åœ¨ç•¶å‰ session æœ‰æ•ˆ
- âœ… ä½¿ç”¨ HTTPS é€£ç·šåˆ° Spotifyï¼ˆç”± spotipy è™•ç†ï¼‰

#### æœ¬åœ°ä¼ºæœå™¨
- âœ… åªç›£è½ localhostï¼ˆä¸æŽ¥å—å¤–éƒ¨é€£ç·šï¼‰
- âœ… ä¼ºæœå™¨åœ¨æŽˆæ¬Šå®Œæˆå¾Œç«‹å³é—œé–‰
- âœ… ä¸è¨˜éŒ„æ•æ„Ÿè³‡è¨Š

## ðŸ“± ä½¿ç”¨æ–¹å¼

### æ–¹å¼ 1: ç¨ç«‹æ¸¬è©¦

```bash
python spotify_qr_auth.py
```

è¦–çª—æœƒé¡¯ç¤ºï¼š
- å·¦å´ï¼šæŽˆæ¬Šæ­¥é©Ÿèªªæ˜Ž
- å³å´ï¼šå¤§åž‹ QR Code
- åº•éƒ¨ï¼šç‹€æ…‹æ›´æ–°å’Œå–æ¶ˆæŒ‰éˆ•

### æ–¹å¼ 2: æ•´åˆåˆ° Demo æ¨¡å¼

```bash
python demo_mode.py --spotify
```

é¦–æ¬¡å•Ÿå‹•æ™‚ï¼š
```
éœ€è¦æŽˆæ¬Š Spotify...
é¸æ“‡æŽˆæ¬Šæ–¹å¼ï¼š
  [1] ç€è¦½å™¨æŽˆæ¬Šï¼ˆè‡ªå‹•é–‹å•Ÿç€è¦½å™¨ï¼‰
  [2] QR Code æŽˆæ¬Šï¼ˆä½¿ç”¨æ‰‹æ©ŸæŽƒæï¼‰
è«‹é¸æ“‡ (é è¨­ 2): 
```

ç›´æŽ¥æŒ‰ Enter ä½¿ç”¨ QR Code æŽˆæ¬Šï¼ˆé è¨­ï¼‰ã€‚

### æ–¹å¼ 3: åœ¨ç¨‹å¼ä¸­å‘¼å«

```python
from spotify_qr_auth import show_qr_auth_dialog
from spotify_auth import SpotifyAuthManager

# å»ºç«‹èªè­‰ç®¡ç†å™¨
auth = SpotifyAuthManager()

# é¡¯ç¤º QR æŽˆæ¬Šå°è©±æ¡†
success = show_qr_auth_dialog(auth)

if success:
    print("æŽˆæ¬ŠæˆåŠŸï¼")
    # é–‹å§‹ä½¿ç”¨ Spotify API
```

## ðŸŽ¨ UI è¨­è¨ˆç´°ç¯€

### é¡è‰²é…ç½®
```python
èƒŒæ™¯ï¼šæ·±ç°åˆ° Spotify ç¶ çš„æ¼¸å±¤
  gradient: #191414 â†’ #1DB954

æ¨™é¡Œï¼šSpotify ç¶ 
  #1DB954

æ–‡å­—ï¼šç™½è‰² / åŠé€æ˜Žç™½è‰²
  rgba(255,255,255,1.0)
  rgba(255,255,255,0.8)

QR Code èƒŒæ™¯ï¼šç´”ç™½
  #FFFFFF

æŒ‰éˆ•ï¼šåŠé€æ˜Žç™½è‰²é‚Šæ¡†
  rgba(255,255,255,0.1)
```

### å­—åž‹å¤§å°
```python
æ¨™é¡Œï¼š36pt Bold
å‰¯æ¨™é¡Œï¼š20pt Regular
æ­¥é©Ÿèªªæ˜Žï¼š18pt Regular
ç‹€æ…‹æ–‡å­—ï¼š16pt Regular
æŒ‰éˆ•ï¼š16pt Regular
```

### ä½ˆå±€æ¯”ä¾‹
```
å·¦å´èªªæ˜Žï¼šå³å´ QR = 6:4
é‚Šè·ï¼š50px
é–“è·ï¼š50px
QR Codeï¼š350x350px
```

## ðŸ”„ ç‹€æ…‹æµè½‰

```
åˆå§‹åŒ–
  â†“
å•Ÿå‹• HTTP ä¼ºæœå™¨
  â†“
ç”ŸæˆæŽˆæ¬Š URL
  â†“
ç”¢ç”Ÿ QR Code
  â†“
é¡¯ç¤º UI ("ç­‰å¾…æŽƒæ...")
  â†“
[æ¯ 0.5 ç§’æª¢æŸ¥]
  â†“
æŽˆæ¬Šç¢¼å·²æŽ¥æ”¶ï¼Ÿ
  â”œâ”€ No â†’ ç¹¼çºŒç­‰å¾…
  â””â”€ Yes â†“
         åœæ­¢æª¢æŸ¥
         â†“
         é¡¯ç¤ºé€²åº¦ ("æŽˆæ¬ŠæˆåŠŸï¼æ­£åœ¨å®Œæˆè¨­å®š...")
         â†“
         äº¤æ› access token
         â†“
         å„²å­˜ token
         â†“
         é—œé–‰ä¼ºæœå™¨
         â†“
         é—œé–‰è¦–çª—
```

## âš ï¸ æ•…éšœæŽ’é™¤

### Q1: QR Code æŽƒæå¾Œæ²’æœ‰åæ‡‰

**å¯èƒ½åŽŸå› **ï¼š
- æ‰‹æ©Ÿå’Œè»Šæ©Ÿä¸åœ¨åŒä¸€ç¶²è·¯
- é˜²ç«ç‰†é˜»æ“‹ localhost:8888

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
```bash
# æª¢æŸ¥æ˜¯å¦èƒ½è¨ªå• localhost
curl http://localhost:8888

# æš«æ™‚é—œé–‰é˜²ç«ç‰†ï¼ˆmacOSï¼‰
sudo pfctl -d

# æª¢æŸ¥åŸ æ˜¯å¦è¢«ä½”ç”¨
lsof -i :8888
```

### Q2: è¦–çª—ç„¡æ³•å…¨èž¢å¹•é¡¯ç¤º

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
```python
# ä¿®æ”¹ spotify_qr_auth.py
self.setFixedSize(1920, 480)  # èª¿æ•´ç‚ºæ‚¨çš„èž¢å¹•å°ºå¯¸
self.showFullScreen()  # æˆ–ä½¿ç”¨å…¨èž¢å¹•æ¨¡å¼
```

### Q3: QR Code å¤ªå°ç„¡æ³•æŽƒæ

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
```python
# å¢žåŠ  QR Code å°ºå¯¸
scaled_pixmap = pixmap.scaled(
    500, 500,  # å¾ž 350 æ”¹ç‚º 500
    Qt.AspectRatioMode.KeepAspectRatio,
    Qt.TransformationMode.SmoothTransformation
)
```

### Q4: æ‰‹æ©Ÿæç¤º "ç„¡æ³•é€£ç·š"

**åŽŸå› **ï¼šæ‰‹æ©Ÿå’Œè»Šæ©Ÿç¶²è·¯ä¸é€š

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. ç¢ºä¿è»Šæ©Ÿå’Œæ‰‹æ©Ÿéƒ½é€£ä¸Šç¶²è·¯ï¼ˆWiFi/4Gï¼‰
2. æˆ–ä½¿ç”¨æ‰‹æ©Ÿç†±é»žè®“è»Šæ©Ÿé€£ç·š
3. æª¢æŸ¥è»Šæ©Ÿçš„ IP ä½å€ï¼š
   ```bash
   ifconfig | grep inet
   ```

## ðŸ“Š æ•ˆèƒ½æŒ‡æ¨™

### è³‡æºä½¿ç”¨
- QR Code ç”Ÿæˆï¼š< 100ms
- è¨˜æ†¶é«”ä½”ç”¨ï¼š< 50MB
- CPU ä½¿ç”¨ï¼š< 1%ï¼ˆç­‰å¾…æ™‚ï¼‰

### æŽˆæ¬Šæ™‚é–“
```
ç”Ÿæˆ QR Codeï¼š< 0.1 ç§’
æŽƒæ QR Codeï¼š2-5 ç§’ï¼ˆä½¿ç”¨è€…æ“ä½œï¼‰
æ‰‹æ©ŸæŽˆæ¬Šï¼š5-10 ç§’ï¼ˆä½¿ç”¨è€…æ“ä½œï¼‰
Token äº¤æ›ï¼š< 1 ç§’
ç¸½è¨ˆï¼šç´„ 8-16 ç§’
```

vs ç€è¦½å™¨æŽˆæ¬Šï¼š
```
é–‹å•Ÿç€è¦½å™¨ï¼š1-2 ç§’
è¼‰å…¥é é¢ï¼š2-3 ç§’
è¼¸å…¥å¸³å¯†ï¼š20-60 ç§’ï¼ˆä½¿ç”¨è€…æ“ä½œï¼‰
ç¸½è¨ˆï¼šç´„ 23-65 ç§’
```

**QR Code æŽˆæ¬Šå¿« 2-4 å€ï¼**

## ðŸš€ æœªä¾†å„ªåŒ–

### 1. å¤š QR Code é¡¯ç¤º
```python
# åŒæ™‚é¡¯ç¤ºå¤šå€‹ QR Codeï¼ˆä¸åŒå¤§å°ï¼‰
small_qr   # 200x200 ç”¨æ–¼é è·æŽƒæ
medium_qr  # 350x350 ä¸»è¦é¡¯ç¤º
large_qr   # 500x500 è¿‘è·æŽƒæ
```

### 2. å‹•æ…‹ QR Code
```python
# æ¯ 30 ç§’æ›´æ–° state åƒæ•¸
# æé«˜å®‰å…¨æ€§
```

### 3. å¿«é€Ÿé‡è©¦
```python
# æŽˆæ¬Šå¤±æ•—å¾Œä¸é—œé–‰è¦–çª—
# ç”Ÿæˆæ–°çš„ QR Code ç«‹å³é‡è©¦
```

### 4. å¤šèªžè¨€æ”¯æ´
```python
# æ ¹æ“šç³»çµ±èªžè¨€åˆ‡æ› UI
languages = ['zh-TW', 'en-US', 'ja-JP']
```

## âœ… ç¸½çµ

### å„ªå‹¢
- âœ¨ **ä½¿ç”¨è€…é«”é©—**ï¼šç„¡éœ€åœ¨è»Šæ©Ÿè¼¸å…¥
- ðŸ”’ **å®‰å…¨æ€§**ï¼šå®Œæ•´ OAuth 2.0 æµç¨‹
- ðŸ“± **ä¾¿åˆ©æ€§**ï¼šæ‰‹æ©Ÿæ“ä½œæ›´é †æ‰‹
- ðŸŽ¨ **UI è¨­è¨ˆ**ï¼šå°ˆç‚ºæ©«å‘èž¢å¹•å„ªåŒ–
- âš¡ **é€Ÿåº¦å¿«**ï¼šæ¯”ç€è¦½å™¨æŽˆæ¬Šå¿« 2-4 å€

### é©ç”¨å ´æ™¯
- âœ… è§¸æŽ§èž¢å¹•è»Šæ©Ÿ
- âœ… æ¨¹èŽ“æ´¾éƒ¨ç½²
- âœ… æ©«å‘èž¢å¹•ï¼ˆ1920x480ï¼‰
- âœ… ç„¡å¯¦é«”éµç›¤ç’°å¢ƒ

### ç›¸å®¹æ€§
- âœ… æ”¯æ´æ‰€æœ‰ QR æŽƒæ App
- âœ… æ”¯æ´æ‰€æœ‰æ‰‹æ©Ÿç€è¦½å™¨
- âœ… iOS / Android é€šç”¨
- âœ… å‘ä¸‹ç›¸å®¹ç€è¦½å™¨æŽˆæ¬Š

---

**å¯¦ä½œæ—¥æœŸ**: 2025-11-24  
**åŠŸèƒ½ç‹€æ…‹**: âœ… å®Œæˆä¸¦æ¸¬è©¦  
**é©ç”¨ç‰ˆæœ¬**: Python 3.14+ / PyQt6 6.10+
